# 1 인터넷 네트워크
## 1.1 인터넷 통신
### 인터넷에서 컴퓨터 둘은 어떻게 통신할까?   
> 클라이언트와 서버가 바로 붙어있다면, 케이블을 연결해서 전송하면 될것이다.    

### 만약에 클라이언트와 서버 사이에 인터넷이 있다면?   
인터넷 망을 통해서 통신을 해야한다.   
하지만 인터넷 망은 단순하지 않고, 수많은 복잡한 상황이 있다.   
그러면 어떻게 전송할까??   
이를 이해하기 위해서는 IP에 대해서 학습을 해야한다.
## 1.2 IP(인터넷 프로토콜)
1. 먼저 클라이언트와 서버가 IP주소를 가지고 있어야한다.   
   

### IP(인터넷 프로토콜)
- 지정한 IP주소에 데이터 전달
- 패킷이라는 통신 단위로 전송
  
### IP 패킷 정보
- 출발지 IP
- 목적지 IP
- 전송 데이터
- 기타 등등...
1. IP패킷을 만들어서 이를 클라이언트에서 전송을 한다.
2. 이를 인터넷 망 안의 노드에서도 이 패킷을 이해하고 목적지를 향해서 전송한다.
3. 이를 받은 서버쪽에서도, 똑같은 패킷을 만들어서 클라이언트로 전송한다.

### IP 프로토콜의 한계
- **비연결성**
    + 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송
- **비신뢰성**
    + 중간에 패킷이 사라지면?
    + 패킷이 순서대로 안오면?
- **프로그램 구분**
    + 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이라면?

**대상이 서비스 불능, 패킷전송**
- 클라이언트는 대상 서버가 패킷을 받을 수 있는 상태인지 모른다.

**패킷 소실**
- 중간에 인터넷 망의 노드가 꺼지거나 오류로 패킷이 손실된다면?

**패킷 전달 순서 문제 발생**
- 패킷의 내용이 많아서 여러 패킷으로 나눠서 보내는데, 패킷의 순서가 바뀌게 된다면?

이를 해결해주는 것이 바로 TCP와 UDP이다.

## 1.3 TCP, UDP
IP 프로토콜에서 발생하는 문제를 TCP가 해결을 한다.   
### 인터넷 프로토콜 스택의 사계층
애플리케이션 계층 - HTTP, FTP   
전송 계층 - TCP, UDP   
인터넷 계층 - IP   
네트워크 인터페이스 계층

### 프로토콜 계층(채팅 프로그램을 통해 채팅 전송한다고 가정)
1. 프로그램이 Hello, World! 메시지 생성
2. SOCKET 라이브러리를 통해 전달
3. TCP 정보 생성, 메시지 데이터 포함
4. IP 패킷 생성, TCP 데이터 포함

### TCP세그먼트 정보 
- 출발지 PORT
- 목적지 PORT
- 전송 제어
- 순서
- 검증정보
- 전송데이터...
> IP만으로 해결하지 못했던 것을 해결하기 위한 정보를 가지고 있다.

### TCP 특징
#### 1. 전송제어 프로토콜   
- 연결지향 - TCP 3way handshake(가상연결)
- 데이터 전달 보증
- 순서 보장
- 신뢰할 수 있는 프로토콜
- 현재는 대부분 TCP 사용

> 3way handshake 연결과정
> 1. 클라이언트에서 SYN을 전송한다.
> 2. 서버에서 SYN+ACK를 전송한다.
> 3. 클라이언트에서 ACK를 전송한다.
> 4. 데이터 전송
> > SYN: 접속요청, ACK: 요청수락   
> > 3. ACK와 함께 데이터 전송 가능

#### 2. 데이터 전달 보증
1. 클라이언트에서 데이터 전송
2. 서버에서 데이터를 잘 받았다고 알려준다.
- 이를 통해서 문제가 발생했는지를 알 수 있다.

#### 3. 순서 보장
1. 클라이언트 : 패킷1, 패킷2, 패킷3 순서로 전송
2. 서버 : 패킷1, 패킷3, 패킷2 순서로 도착
3. 서버에서 클라이언트에게 패킷2 부터 다시보내라고 한다.
- 물론 서버 내부에서도 최적화 할 수 있다.

### UDP의 특징   
#### 사용자 데이터그램 프로토콜  
- 하얀 도화지에 비유(기능이 거의 없음)
- 연결지향 - TCP 3 way handshake [X]
- 데이터 전달보증 [X]
- 순서 보장 [X]
- 데이터 잔달 및 순서가 보장되지 않지만, 단순하고 빠르다.

IP와 거의 같다. 하지만 PORT + CheckSum정도만 추가되어있다.
애플리케이션에서 추가 작업이 필요하다.

## 1.4 PORT
### 한번에 둘 이상 연결해야하면?   
- 클라이언트 에서 게임, 화상통화, 웹브라우저 등등 이렇게 여러개의 서버와 통신을 해야한다면?   
- 어디에 필요한 패킷인지 어떻게 구분을 할 것인가?

### TCP/UDP 세그먼트
- 출발지 PORT
- 목적지 PORT

같은 IP내에서 프로세스를 구분하게 해준다.   
IP가 아파트라면, PORT는 몇동 몇호인지를 알려준다.

### PORT
- 0~65535 할당가능
- 0~1023 잘 알려진 포트, 사용하지 않는 것이 좋다.
    + FTP - 20, 21
    + TELNET - 23
    + HTTP - 80
    + HTTPS - 443

## 1.5 DNS
1. IP는 기억하기 어렵다.
2. IP는 변경될 수 있다.

### DNS - 도메인 네임 시스템
- 전화번호부
- 도메인 명을 IP주소로 변환

### DNS 사용
1. DNS 서버에 도메인을 등록해 놓는다.
2. 해당 도메인 명을 찾으면 해당 IP를 알려준다.
3. 알려준 IP로 접속한다.
- IP가 바뀌게 된다면 DNS서버에서 IP를 바꾸면된다.

위의 2가지 문제를 해결하게 된다.

